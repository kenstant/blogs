<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Maven Wrapper 详解与实践 | kenstant的博客</title>
    <meta name="description" content="kenstant的博客">
    <meta name="generator" content="VitePress v2.0.0-alpha.16">
    <link rel="preload stylesheet" href="/blogs/assets/style.B4PWJrCz.css" as="style">
    <link rel="preload stylesheet" href="/blogs/vp-icons.css" as="style">
    
    <script type="module" src="/blogs/assets/app.CM0tDhzG.js"></script>
    <link rel="preload" href="/blogs/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blogs/assets/chunks/theme.DJQ3o67N.js">
    <link rel="modulepreload" href="/blogs/assets/chunks/framework.6-m_a-od.js">
    <link rel="modulepreload" href="/blogs/assets/tech-learning_java_maven-wrapper.md.Du8RhHd9.lean.js">
    <link rel="icon" href="/blogs/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/blogs/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/blogs/icons/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/blogs/icons/apple-touch-icon.png">
    <link rel="manifest" href="/blogs/icons/site.webmanifest">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-8e410b79><!--[--><!--]--><!--[--><span tabindex="-1" data-v-be48d319></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-be48d319>Skip to content</a><!--]--><!----><header class="VPNav" data-v-8e410b79 data-v-46d25293><div class="VPNavBar top" data-v-46d25293 data-v-ddefa081><div class="wrapper" data-v-ddefa081><div class="container" data-v-ddefa081><div class="title" data-v-ddefa081><div class="VPNavBarTitle" data-v-ddefa081 data-v-4218a31a><a class="title" href="/blogs/" data-v-4218a31a><!--[--><!--]--><!----><span data-v-4218a31a>kenstant的博客</span><!--[--><!--]--></a></div></div><div class="content" data-v-ddefa081><div class="content-body" data-v-ddefa081><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ddefa081 data-v-c6b1e06a><!--[--><button type="button" class="VPNavBarSearchButton" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" data-v-c6b1e06a data-v-ef676460><span class="vpi-search" aria-hidden="true" data-v-ef676460></span><span class="text" data-v-ef676460>Search</span><span class="keys" aria-hidden="true" data-v-ef676460><kbd class="key-cmd" data-v-ef676460>⌘</kbd><kbd class="key-ctrl" data-v-ef676460>Ctrl</kbd><kbd data-v-ef676460>K</kbd></span></button><!----><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ddefa081 data-v-b5c5c4dc><span id="main-nav-aria-label" class="visually-hidden" data-v-b5c5c4dc> Main Navigation </span><!--[--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ddefa081 data-v-4c439896><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-4c439896 data-v-e7985c94 data-v-ad1bd3fa><span class="check" data-v-ad1bd3fa><span class="icon" data-v-ad1bd3fa><!--[--><span class="vpi-sun sun" data-v-e7985c94></span><span class="vpi-moon moon" data-v-e7985c94></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ddefa081 data-v-61ed4e50 data-v-10b1d303><!--[--><a class="VPSocialLink no-icon" href="https://github.com/kenstant" aria-label="github" target="_blank" rel="me noopener" data-v-10b1d303 data-v-22b9c8b5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ddefa081 data-v-12e31893 data-v-db8b1fc3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-db8b1fc3><span class="vpi-more-horizontal icon" data-v-db8b1fc3></span></button><div class="menu" data-v-db8b1fc3><div class="VPMenu" data-v-db8b1fc3 data-v-70413b0b><!----><!--[--><!--[--><!----><div class="group" data-v-12e31893><div class="item appearance" data-v-12e31893><p class="label" data-v-12e31893>Appearance</p><div class="appearance-action" data-v-12e31893><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-12e31893 data-v-e7985c94 data-v-ad1bd3fa><span class="check" data-v-ad1bd3fa><span class="icon" data-v-ad1bd3fa><!--[--><span class="vpi-sun sun" data-v-e7985c94></span><span class="vpi-moon moon" data-v-e7985c94></span><!--]--></span></span></button></div></div></div><div class="group" data-v-12e31893><div class="item social-links" data-v-12e31893><div class="VPSocialLinks social-links-list" data-v-12e31893 data-v-10b1d303><!--[--><a class="VPSocialLink no-icon" href="https://github.com/kenstant" aria-label="github" target="_blank" rel="me noopener" data-v-10b1d303 data-v-22b9c8b5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ddefa081 data-v-0068b816><span class="container" data-v-0068b816><span class="top" data-v-0068b816></span><span class="middle" data-v-0068b816></span><span class="bottom" data-v-0068b816></span></span></button></div></div></div></div><div class="divider" data-v-ddefa081><div class="divider-line" data-v-ddefa081></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-8e410b79 data-v-ce6f96dc><div class="container" data-v-ce6f96dc><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-ce6f96dc data-v-9b0a0265><button data-v-9b0a0265>返回顶部</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-8e410b79 data-v-1321b454><div class="VPDoc has-aside" data-v-1321b454 data-v-d30c2b42><!--[--><!--]--><div class="container" data-v-d30c2b42><div class="aside" data-v-d30c2b42><div class="aside-curtain" data-v-d30c2b42></div><div class="aside-container" data-v-d30c2b42><div class="aside-content" data-v-d30c2b42><div class="VPDocAside" data-v-d30c2b42 data-v-9a6af9f7><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-9a6af9f7 data-v-b72904b0><div class="content" data-v-b72904b0><div class="outline-marker" data-v-b72904b0></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b72904b0>On this page</div><ul class="VPDocOutlineItem root" data-v-b72904b0 data-v-835de44b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-9a6af9f7></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d30c2b42><div class="content-container" data-v-d30c2b42><!--[--><!--]--><main class="main" data-v-d30c2b42><div style="position:relative;" class="vp-doc _blogs_tech-learning_java_maven-wrapper external-link-icon-enabled" data-v-d30c2b42><div><h1 id="maven-wrapper-详解与实践" tabindex="-1">Maven Wrapper 详解与实践 <a class="header-anchor" href="#maven-wrapper-详解与实践" aria-label="Permalink to “Maven Wrapper 详解与实践”">​</a></h1><h2 id="什么是-maven-wrapper" tabindex="-1">什么是 Maven Wrapper？ <a class="header-anchor" href="#什么是-maven-wrapper" aria-label="Permalink to “什么是 Maven Wrapper？”">​</a></h2><p>Maven Wrapper（Maven 包装器）是一个工具，它允许你在没有安装 Maven 的情况下运行 Maven 项目。 它会自动下载并使用项目指定的 Maven 版本，确保所有开发者使用相同的 Maven 版本，从而避免&quot;在我机器上能跑&quot;的问题。</p><h2 id="maven-wrapper-的历史" tabindex="-1">Maven Wrapper 的历史 <a class="header-anchor" href="#maven-wrapper-的历史" aria-label="Permalink to “Maven Wrapper 的历史”">​</a></h2><h3 id="takari-maven-wrapper-起源" tabindex="-1">Takari Maven Wrapper（起源） <a class="header-anchor" href="#takari-maven-wrapper-起源" aria-label="Permalink to “Takari Maven Wrapper（起源）”">​</a></h3><p>Maven Wrapper 最初由 <strong>Takari 团队</strong>开发，旨在为 Maven 项目提供类似于 Gradle Wrapper 的功能。Takari 是一个专注于 Maven 工具和插件的开源项目，由 Maven 的核心贡献者创建。</p><p><strong>Takari Maven Wrapper 的特点</strong>：</p><ul><li>作为独立的 Maven 插件提供：<code>io.takari:maven:wrapper</code></li><li>通过 GitHub 托管：<code>https://github.com/takari/maven-wrapper</code></li><li>使用命令：<code>mvn -N io.takari:maven:wrapper</code></li></ul><h3 id="apache-maven-wrapper-官方版本" tabindex="-1">Apache Maven Wrapper（官方版本） <a class="header-anchor" href="#apache-maven-wrapper-官方版本" aria-label="Permalink to “Apache Maven Wrapper（官方版本）”">​</a></h3><p>随着 Maven 社区的发展，<strong>Apache Maven 官方团队</strong>将 Takari 的 Maven Wrapper 整合进了官方的 Maven 项目中。从 Maven 3.7.0 开始，Maven Wrapper 成为 Maven 的官方组件。</p><p><strong>Apache Maven Wrapper 的特点</strong>：</p><ul><li>作为 Maven 的官方组件，随 Maven 一起维护</li><li>官方文档：<code>https://maven.apache.org/wrapper/</code></li><li>使用命令：<code>mvn wrapper:wrapper</code>（Maven 3.7.0+）</li></ul><h3 id="两者的关系" tabindex="-1">两者的关系 <a class="header-anchor" href="#两者的关系" aria-label="Permalink to “两者的关系”">​</a></h3><ol><li><strong>历史渊源</strong>：Apache Maven Wrapper 是基于 Takari Maven Wrapper 发展而来的官方版本</li><li><strong>兼容性</strong>：两者生成的 Wrapper 文件格式完全兼容，可以互相使用</li><li><strong>当前状态</strong>： <ul><li><strong>Takari Maven Wrapper</strong>：仍然维护，但主要作为历史兼容性保留</li><li><strong>Apache Maven Wrapper</strong>：官方推荐使用，持续更新和维护</li></ul></li><li><strong>迁移建议</strong>：新项目建议使用 Apache Maven Wrapper，老项目可以继续使用 Takari 版本，两者功能相同</li></ol><h3 id="如何选择" tabindex="-1">如何选择？ <a class="header-anchor" href="#如何选择" aria-label="Permalink to “如何选择？”">​</a></h3><ul><li><strong>新项目</strong>：使用 <code>mvn wrapper:wrapper</code>（Apache 官方版本）</li><li><strong>已有项目</strong>：如果已经使用 Takari 版本，可以继续使用，也可以迁移到官方版本</li><li><strong>兼容性</strong>：两者生成的脚本和配置文件格式相同，可以无缝切换</li></ul><h2 id="为什么需要-maven-wrapper" tabindex="-1">为什么需要 Maven Wrapper？ <a class="header-anchor" href="#为什么需要-maven-wrapper" aria-label="Permalink to “为什么需要 Maven Wrapper？”">​</a></h2><h3 id="传统方式的问题" tabindex="-1">传统方式的问题 <a class="header-anchor" href="#传统方式的问题" aria-label="Permalink to “传统方式的问题”">​</a></h3><p>在没有 Maven Wrapper 之前，开发者需要：</p><ol><li><strong>手动安装 Maven</strong>：每个开发者都需要在自己的机器上安装 Maven</li><li><strong>版本不一致</strong>：不同开发者可能使用不同版本的 Maven，导致构建结果不一致</li><li><strong>环境配置复杂</strong>：需要配置 <code>MAVEN_HOME</code> 和 <code>PATH</code> 环境变量</li><li><strong>CI/CD 配置繁琐</strong>：需要在 CI/CD 环境中安装特定版本的 Maven</li><li><strong>settings.xml 配置不统一</strong>：每个开发者使用自己的 <code>~/.m2/settings.xml</code>，导致仓库地址、镜像配置、认证信息等不一致，可能引发依赖下载失败、构建速度差异等问题</li></ol><h3 id="maven-wrapper-的优势" tabindex="-1">Maven Wrapper 的优势 <a class="header-anchor" href="#maven-wrapper-的优势" aria-label="Permalink to “Maven Wrapper 的优势”">​</a></h3><ol><li><strong>零配置</strong>：克隆项目后即可使用，无需安装 Maven</li><li><strong>版本统一</strong>：所有开发者使用相同的 Maven 版本</li><li><strong>简化 CI/CD</strong>：CI/CD 环境无需预装 Maven</li><li><strong>项目自包含</strong>：Maven 版本信息与项目一起版本控制</li><li><strong>settings.xml 统一管理</strong>：通过 <code>.mvn/maven.config</code> 指定项目级别的 <code>settings.xml</code>，确保所有开发者和 CI/CD 环境使用相同的仓库配置、镜像地址、认证信息等，这是 Maven Wrapper 的核心优势之一</li></ol><h2 id="maven-wrapper-的工作原理" tabindex="-1">Maven Wrapper 的工作原理 <a class="header-anchor" href="#maven-wrapper-的工作原理" aria-label="Permalink to “Maven Wrapper 的工作原理”">​</a></h2><h3 id="项目结构" tabindex="-1">项目结构 <a class="header-anchor" href="#项目结构" aria-label="Permalink to “项目结构”">​</a></h3><p>首先，让我们看看一个典型的 Maven Wrapper 项目结构：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>project-root/</span></span>
<span class="line"><span>├── src/                    # 源代码目录（标准 Maven 项目结构）</span></span>
<span class="line"><span>├── mvnw                    # Unix/Linux/macOS 脚本</span></span>
<span class="line"><span>├── mvnw.cmd                # Windows 脚本</span></span>
<span class="line"><span>├── pom.xml                 # Maven 项目配置</span></span>
<span class="line"><span>├── settings.xml            # 项目级别的 Maven 配置（可选）</span></span>
<span class="line"><span>└── .mvn/</span></span>
<span class="line"><span>    ├── maven.config        # Maven 默认配置（可选）</span></span>
<span class="line"><span>    └── wrapper/</span></span>
<span class="line"><span>        ├── maven-wrapper.jar              # Wrapper JAR（自动生成，不提交到版本控制）</span></span>
<span class="line"><span>        ├── maven-wrapper.properties       # Wrapper 配置（指定 Maven 版本）</span></span>
<span class="line"><span>        └── MavenWrapperDownloader.java    # 下载器源码（用于自动下载）</span></span></code></pre></div><p><strong>关键点</strong>：</p><ul><li><code>mvnw</code> 和 <code>mvnw.cmd</code> 位于项目根目录，是 Maven Wrapper 的入口脚本</li><li><code>.mvn</code> 目录是 Maven Wrapper 的标志，用于识别项目根目录</li><li><code>settings.xml</code> 可以放在项目根目录，通过 <code>.mvn/maven.config</code> 引用</li></ul><p>Maven Wrapper 包含以下核心组件：</p><h3 id="_1-包装器脚本" tabindex="-1">1. 包装器脚本 <a class="header-anchor" href="#_1-包装器脚本" aria-label="Permalink to “1. 包装器脚本”">​</a></h3><p>Maven Wrapper 提供了两个脚本文件，它们功能完全相同，只是针对不同的操作系统：</p><ul><li><strong><code>mvnw</code></strong>（Unix/Linux/macOS）：Shell 脚本，用于 Unix 类系统（包括 Linux 和 macOS）</li><li><strong><code>mvnw.cmd</code></strong>（Windows）：批处理脚本，用于 Windows 系统</li></ul><div class="info custom-block"><p class="custom-block-title custom-block-title-default">INFO</p><p><code>mvnw</code> 和 <code>mvnw.cmd</code> 是同一个工具的不同平台版本，功能完全一致。在 Unix/Linux/macOS 上使用 <code>./mvnw</code>，在 Windows 上使用 <code>mvnw.cmd</code>（或 <code>mvnw</code>，如果配置了 Git Bash 等环境）。</p></div><p>这些脚本会：</p><ul><li>通过向上查找 <code>.mvn</code> 目录来确定项目根目录（<code>.mvn</code> 目录是 Maven Wrapper 的标志，只存在于项目根目录）</li><li>检查是否存在 <code>maven-wrapper.jar</code></li><li>如果不存在，自动下载 <code>maven-wrapper.jar</code></li><li>执行 Maven 命令</li></ul><h3 id="_2-配置文件" tabindex="-1">2. 配置文件 <a class="header-anchor" href="#_2-配置文件" aria-label="Permalink to “2. 配置文件”">​</a></h3><h4 id="mvn-wrapper-maven-wrapper-properties" tabindex="-1"><code>.mvn/wrapper/maven-wrapper.properties</code> <a class="header-anchor" href="#mvn-wrapper-maven-wrapper-properties" aria-label="Permalink to “.mvn/wrapper/maven-wrapper.properties”">​</a></h4><p>这个文件定义了 Maven 和 Wrapper 的版本信息：</p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">distributionUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.9.6/apache-maven-3.9.6-bin.zip</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">wrapperUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar</span></span></code></pre></div><ul><li><strong><code>distributionUrl</code></strong>：指定要使用的 Maven 版本</li><li><strong><code>wrapperUrl</code></strong>：指定 Maven Wrapper 的下载地址</li></ul><h4 id="mvn-maven-config" tabindex="-1"><code>.mvn/maven.config</code> <a class="header-anchor" href="#mvn-maven-config" aria-label="Permalink to “.mvn/maven.config”">​</a></h4><p>这个文件可以配置 Maven 的默认命令行参数。</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>3.8.x 及以下的版本不支持使用注释，3.9.x 及之后的版本支持使用注释，并且推荐每个参数单独一行。</p></div><blockquote><p>全部命令行参数参考<a href="https://maven.apache.org/ref/3.9.6/maven-embedder/cli.html" target="_blank" rel="noreferrer">maven文档</a></p></blockquote><p><strong>完整配置示例</strong>：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-309" id="tab-310" checked><label data-title=".mvn/maven.config" for="tab-310">.mvn/maven.config</label></div><div class="blocks"><div class="language-properties active"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># settings.xml文件的读取位置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">settings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=./settings.xml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 线程数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">threads</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 跳过测试，包括编译和运行(高优先级),如果想仅跳过测试的运行，请使用`-DskipTests=true`(同时写的优先级更低)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Dmaven.test.skip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -DskipTests=true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 这里指定你本地的maven仓库（默认值是`~/.m2/repository`，mac可以不配，windows可以设置到其他目录避免C盘爆满)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -Dmaven.repo.local=/Users/kenstant/develop/maven_repository</span></span></code></pre></div></div></div><p><strong>关键优势</strong>：通过在 <code>.mvn/maven.config</code> 中指定 <code>--settings=./settings.xml</code>，可以将 <code>settings.xml</code> 文件放在项目根目录，与项目一起进行版本控制。这样：</p><ul><li>✅ 所有开发者使用相同的仓库配置</li><li>✅ 统一的镜像地址（如国内镜像加速）</li><li>✅ 统一的认证信息（私有仓库访问）</li><li>✅ CI/CD 环境自动使用相同配置</li><li>✅ 避免因配置差异导致的构建问题</li></ul><p><strong>重要提示</strong>：</p><ul><li>路径 <code>./settings.xml</code> 中的 <code>./</code> 指的是 Maven 的当前工作目录（项目根目录），而不是 <code>.mvn</code> 目录</li><li>短参数可以使用 <code>-s./settings.xml</code> 或 <code>-s=./settings.xml</code> 两种写法</li><li>长参数只允许 <code>--settings=./settings.xml</code> 这种写法</li></ul><h3 id="_3-自动下载机制" tabindex="-1">3. 自动下载机制 <a class="header-anchor" href="#_3-自动下载机制" aria-label="Permalink to “3. 自动下载机制”">​</a></h3><p>当 <code>maven-wrapper.jar</code> 不存在时，脚本会：</p><ol><li>首先尝试使用 <code>wget</code> 下载</li><li>如果没有 <code>wget</code>，尝试使用 <code>curl</code> 下载</li><li>如果都没有，使用 Java 编译并运行 <code>MavenWrapperDownloader.java</code> 来下载</li></ol><h2 id="实际项目配置示例" tabindex="-1">实际项目配置示例 <a class="header-anchor" href="#实际项目配置示例" aria-label="Permalink to “实际项目配置示例”">​</a></h2><h3 id="单模块项目" tabindex="-1">单模块项目 <a class="header-anchor" href="#单模块项目" aria-label="Permalink to “单模块项目”">​</a></h3><p>对于单模块项目，Maven Wrapper 的配置非常简单，所有文件都在项目根目录：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>single-module-project/</span></span>
<span class="line"><span>├── mvnw</span></span>
<span class="line"><span>├── mvnw.cmd</span></span>
<span class="line"><span>├── pom.xml</span></span>
<span class="line"><span>├── settings.xml</span></span>
<span class="line"><span>└── .mvn/</span></span>
<span class="line"><span>    ├── maven.config</span></span>
<span class="line"><span>    └── wrapper/</span></span>
<span class="line"><span>        ├── maven-wrapper.jar</span></span>
<span class="line"><span>        ├── maven-wrapper.properties</span></span>
<span class="line"><span>        └── MavenWrapperDownloader.java</span></span></code></pre></div><h3 id="多模块项目" tabindex="-1">多模块项目 <a class="header-anchor" href="#多模块项目" aria-label="Permalink to “多模块项目”">​</a></h3><p>对于多模块项目（Maven Multi-Module Project），Maven Wrapper 应该放在<strong>父项目（Parent Project）的根目录</strong>，而不是子模块中。</p><p><strong>正确的项目结构</strong>：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>multi-module-project/</span></span>
<span class="line"><span>├── mvnw                    # 在父项目根目录</span></span>
<span class="line"><span>├── mvnw.cmd                # 在父项目根目录</span></span>
<span class="line"><span>├── pom.xml                 # 父 POM（packaging 为 pom）</span></span>
<span class="line"><span>├── settings.xml            # 在父项目根目录</span></span>
<span class="line"><span>├── .mvn/                   # 在父项目根目录</span></span>
<span class="line"><span>│   ├── maven.config</span></span>
<span class="line"><span>│   └── wrapper/</span></span>
<span class="line"><span>│       ├── maven-wrapper.jar</span></span>
<span class="line"><span>│       ├── maven-wrapper.properties</span></span>
<span class="line"><span>│       └── MavenWrapperDownloader.java</span></span>
<span class="line"><span>├── module-a/               # 子模块 A</span></span>
<span class="line"><span>│   └── pom.xml</span></span>
<span class="line"><span>├── module-b/               # 子模块 B</span></span>
<span class="line"><span>│   └── pom.xml</span></span>
<span class="line"><span>└── module-c/               # 子模块 C</span></span>
<span class="line"><span>    └── pom.xml</span></span></code></pre></div><p><strong>关键点</strong>：</p><ul><li>✅ Maven Wrapper 文件（<code>mvnw</code>、<code>mvnw.cmd</code>、<code>.mvn</code> 目录）只放在父项目根目录</li><li>✅ 子模块不需要单独的 Maven Wrapper 文件</li><li>✅ 在父项目根目录执行 <code>./mvnw</code> 命令，会自动处理所有子模块</li><li>✅ <code>settings.xml</code> 也放在父项目根目录，所有子模块共享同一配置</li></ul><p><strong>使用示例</strong>：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在父项目根目录执行，会构建所有子模块</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 只构建特定子模块</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -pl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module-a</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 构建特定子模块及其依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -pl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module-a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -am</span></span></code></pre></div><p><strong>为什么不在子模块中放置 Maven Wrapper？</strong></p><ul><li>Maven 多模块项目的构建是从父项目开始的，子模块是作为父项目的一部分被构建</li><li>在子模块中执行 <code>mvnw</code> 时，脚本会向上查找 <code>.mvn</code> 目录，最终找到父项目的配置</li><li>如果每个子模块都有自己的 Maven Wrapper，会造成配置冗余和不一致</li></ul><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-454" id="tab-455" checked><label data-title="mvnw脚本关键部分" for="tab-455">mvnw脚本关键部分</label><input type="radio" name="group-454" id="tab-456"><label data-title="mvnw.cmd脚本关键部分" for="tab-456">mvnw.cmd脚本关键部分</label></div><div class="blocks"><div class="language-bash active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 通过向上查找 .mvn 目录来确定项目根目录</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 逻辑：从当前目录开始，逐级向上查找，直到找到包含 .mvn 目录的目录，该目录即为项目根目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find_maven_basedir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  basedir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  wdir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$wdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] ; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$wdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/.mvn ] ; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      basedir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$wdir</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      break</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    wdir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$wdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/..&quot;; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  done</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">basedir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自动下载 maven-wrapper.jar</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$BASE_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/.mvn/wrapper/maven-wrapper.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Found .mvn/wrapper/maven-wrapper.jar&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Couldn&#39;t find .mvn/wrapper/maven-wrapper.jar, downloading it ...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 从 maven-wrapper.properties 读取下载地址</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 使用 wget 或 curl 下载</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fi</span></span></code></pre></div><div class="language-batch"><button title="Copy Code" class="copy"></button><span class="lang">batch</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REM</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 通过向上查找 .mvn 目录来确定项目根目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">findBaseDir</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXIST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">%WDIR%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\.mvn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">goto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> baseDirFound</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">cd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ..</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">%WDIR%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">%CD%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> goto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> baseDirNotFound</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WDIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">%CD%</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">goto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> findBaseDir</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REM</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 自动下载 maven-wrapper.jar</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> exist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> %WRAPPER_JAR% (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Found %WRAPPER_JAR%</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Couldn&#39;t find %WRAPPER_JAR%, downloading it ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    powershell</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -Command </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&amp;{$webclient = new-object System.Net.WebClient; ...}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></div></div><h2 id="使用方法" tabindex="-1">使用方法 <a class="header-anchor" href="#使用方法" aria-label="Permalink to “使用方法”">​</a></h2><h3 id="基本用法" tabindex="-1">基本用法 <a class="header-anchor" href="#基本用法" aria-label="Permalink to “基本用法”">​</a></h3><p>使用 Maven Wrapper 与使用普通 Maven 命令完全相同，只需要将 <code>mvn</code> 替换为 <code>./mvnw</code>（Unix/Linux/macOS）或 <code>mvnw.cmd</code>（Windows）：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编译项目</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compile</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 运行测试</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 打包项目</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装到本地仓库</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 运行 Spring Boot 应用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spring-boot:run</span></span></code></pre></div><h3 id="windows-使用" tabindex="-1">Windows 使用 <a class="header-anchor" href="#windows-使用" aria-label="Permalink to “Windows 使用”">​</a></h3><p>在 Windows 上，使用 <code>mvnw.cmd</code>：</p><div class="language-cmd"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mvnw.cmd clean compile</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mvnw.cmd clean package</span></span></code></pre></div><h3 id="查看有效配置" tabindex="-1">查看有效配置 <a class="header-anchor" href="#查看有效配置" aria-label="Permalink to “查看有效配置”">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看有效的 Maven 设置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help:effective-settings</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看有效的 POM</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help:effective-pom</span></span></code></pre></div><h2 id="高级配置" tabindex="-1">高级配置 <a class="header-anchor" href="#高级配置" aria-label="Permalink to “高级配置”">​</a></h2><h3 id="自定义-maven-仓库" tabindex="-1">自定义 Maven 仓库 <a class="header-anchor" href="#自定义-maven-仓库" aria-label="Permalink to “自定义 Maven 仓库”">​</a></h3><p>如果项目需要从私有 Maven 仓库下载，可以通过环境变量配置：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MVNW_REPOURL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">https://your-private-repo.com/repository/maven-public</span></span></code></pre></div><h3 id="配置下载认证" tabindex="-1">配置下载认证 <a class="header-anchor" href="#配置下载认证" aria-label="Permalink to “配置下载认证”">​</a></h3><p>如果需要认证才能下载 Maven Wrapper：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MVNW_USERNAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your-username</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MVNW_PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your-password</span></span></code></pre></div><h3 id="启用详细日志" tabindex="-1">启用详细日志 <a class="header-anchor" href="#启用详细日志" aria-label="Permalink to “启用详细日志”">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MVNW_VERBOSE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./mvnw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compile</span></span></code></pre></div><h2 id="如何为项目添加-maven-wrapper" tabindex="-1">如何为项目添加 Maven Wrapper <a class="header-anchor" href="#如何为项目添加-maven-wrapper" aria-label="Permalink to “如何为项目添加 Maven Wrapper”">​</a></h2><h3 id="方法一-使用-spring-initializr" tabindex="-1">方法一：使用 Spring Initializr <a class="header-anchor" href="#方法一-使用-spring-initializr" aria-label="Permalink to “方法一：使用 Spring Initializr”">​</a></h3><p>如果你使用 Spring Initializr 创建项目，可以直接勾选 &quot;Add Maven Wrapper&quot; 选项。</p><h3 id="方法二-使用-maven-插件" tabindex="-1">方法二：使用 Maven 插件 <a class="header-anchor" href="#方法二-使用-maven-插件" aria-label="Permalink to “方法二：使用 Maven 插件”">​</a></h3><p>在已有项目中，可以使用 Maven Wrapper 插件。有两种方式：</p><h4 id="方式-a-apache-官方版本-推荐" tabindex="-1">方式 A：Apache 官方版本（推荐） <a class="header-anchor" href="#方式-a-apache-官方版本-推荐" aria-label="Permalink to “方式 A：Apache 官方版本（推荐）”">​</a></h4><p><strong>Maven 3.7.0+</strong> 可以使用官方内置的 Wrapper 插件：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用默认 Maven 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mvn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wrapper:wrapper</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定 Maven 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mvn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wrapper:wrapper</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Dmaven=3.9.6</span></span></code></pre></div><h4 id="方式-b-takari-版本-兼容旧版本" tabindex="-1">方式 B：Takari 版本（兼容旧版本） <a class="header-anchor" href="#方式-b-takari-版本-兼容旧版本" aria-label="Permalink to “方式 B：Takari 版本（兼容旧版本）”">​</a></h4><p>如果使用的是 Maven 3.7.0 以下的版本，可以使用 Takari 的插件：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用默认 Maven 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mvn</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -N</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> io.takari:maven:wrapper</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定 Maven 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mvn</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -N</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> io.takari:maven:wrapper</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Dmaven=3.9.6</span></span></code></pre></div><p><strong>说明</strong>：</p><ul><li><code>-N</code> 参数表示非递归模式（non-recursive），只在当前项目执行，不处理子模块</li><li>两种方式生成的 Wrapper 文件格式完全相同，可以互相兼容</li><li>新项目推荐使用 Apache 官方版本（<code>mvn wrapper:wrapper</code>）</li></ul><h3 id="方法三-手动添加" tabindex="-1">方法三：手动添加 <a class="header-anchor" href="#方法三-手动添加" aria-label="Permalink to “方法三：手动添加”">​</a></h3><ol><li>创建 <code>.mvn/wrapper</code> 目录</li><li>下载 <code>maven-wrapper.jar</code> 和 <code>maven-wrapper.properties</code></li><li>添加 <code>mvnw</code> 和 <code>mvnw.cmd</code> 脚本</li><li>添加 <code>MavenWrapperDownloader.java</code>（可选，用于自动下载）</li></ol><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to “最佳实践”">​</a></h2><h3 id="_1-版本控制" tabindex="-1">1. 版本控制 <a class="header-anchor" href="#_1-版本控制" aria-label="Permalink to “1. 版本控制”">​</a></h3><p>将以下文件提交到版本控制系统：</p><ul><li>✅ <code>mvnw</code> 和 <code>mvnw.cmd</code> 脚本</li><li>✅ <code>.mvn/wrapper/maven-wrapper.properties</code></li><li>✅ <code>.mvn/wrapper/MavenWrapperDownloader.java</code></li><li>✅ <code>.mvn/maven.config</code>（如果使用）</li></ul><p><strong>不要提交</strong>：</p><ul><li>❌ <code>.mvn/wrapper/maven-wrapper.jar</code>（会自动下载）</li></ul><h3 id="_2-统一-maven-版本" tabindex="-1">2. 统一 Maven 版本 <a class="header-anchor" href="#_2-统一-maven-版本" aria-label="Permalink to “2. 统一 Maven 版本”">​</a></h3><p>在团队中统一使用相同的 Maven 版本，确保构建一致性。</p><h3 id="_3-统一-settings-xml-配置" tabindex="-1">3. 统一 settings.xml 配置 <a class="header-anchor" href="#_3-统一-settings-xml-配置" aria-label="Permalink to “3. 统一 settings.xml 配置”">​</a></h3><p><strong>这是 Maven Wrapper 最重要的优势之一</strong>。通过 <code>.mvn/maven.config</code> 指定项目级别的 <code>settings.xml</code>：</p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># settings.xml文件的读取位置（注意：./ 指的是项目根目录，不是 .mvn 目录）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">settings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=./settings.xml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 线程数（根据机器性能调整）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">threads</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=4</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 跳过测试（根据实际情况选择）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Dmaven.test.skip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=true</span></span></code></pre></div><p>然后在项目根目录创建 <code>settings.xml</code>，配置统一的：</p><ul><li>仓库地址和镜像（如阿里云、华为云等国内镜像）</li><li>私有仓库认证信息</li><li>代理配置</li><li>其他 Maven 设置</li></ul><p>将 <code>settings.xml</code> 提交到版本控制系统，确保团队所有成员和 CI/CD 环境使用完全相同的配置，避免&quot;在我机器上能跑&quot;的问题。</p><p><strong>多模块项目注意</strong>：<code>settings.xml</code> 和 <code>.mvn/maven.config</code> 都放在父项目根目录，所有子模块共享同一配置。</p><h3 id="_4-ci-cd-集成" tabindex="-1">4. CI/CD 集成 <a class="header-anchor" href="#_4-ci-cd-集成" aria-label="Permalink to “4. CI/CD 集成”">​</a></h3><p>在 CI/CD 脚本中直接使用 <code>./mvnw</code>，无需安装 Maven：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># GitHub Actions 示例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build with Maven</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./mvnw clean package</span></span></code></pre></div><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to “常见问题”">​</a></h2><h3 id="q-mvnw-脚本没有执行权限" tabindex="-1">Q: mvnw 脚本没有执行权限？ <a class="header-anchor" href="#q-mvnw-脚本没有执行权限" aria-label="Permalink to “Q: mvnw 脚本没有执行权限？”">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvnw</span></span></code></pre></div><h3 id="q-下载-maven-很慢" tabindex="-1">Q: 下载 Maven 很慢？ <a class="header-anchor" href="#q-下载-maven-很慢" aria-label="Permalink to “Q: 下载 Maven 很慢？”">​</a></h3><p>可以配置使用国内镜像，修改 <code>.mvn/wrapper/maven-wrapper.properties</code>：</p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">distributionUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.9.6/binaries/apache-maven-3.9.6-bin.zip</span></span></code></pre></div><h3 id="q-如何更新-maven-版本" tabindex="-1">Q: 如何更新 Maven 版本？ <a class="header-anchor" href="#q-如何更新-maven-版本" aria-label="Permalink to “Q: 如何更新 Maven 版本？”">​</a></h3><p>修改 <code>.mvn/wrapper/maven-wrapper.properties</code> 中的 <code>distributionUrl</code>，指向新的 Maven 版本。</p><h3 id="q-windows-上无法执行-mvnw-cmd" tabindex="-1">Q: Windows 上无法执行 mvnw.cmd？ <a class="header-anchor" href="#q-windows-上无法执行-mvnw-cmd" aria-label="Permalink to “Q: Windows 上无法执行 mvnw.cmd？”">​</a></h3><p>确保文件没有被重命名，保持为 <code>mvnw.cmd</code>。</p><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to “总结”">​</a></h2><p>Maven Wrapper 是现代 Java 项目的最佳实践之一，它：</p><ul><li>✅ 简化了项目设置流程</li><li>✅ 确保了构建环境的一致性（Maven 版本 + settings.xml 配置）</li><li>✅ 降低了新开发者的上手成本</li><li>✅ 简化了 CI/CD 配置</li><li>✅ <strong>统一管理 settings.xml，确保仓库、镜像、认证等配置一致</strong></li></ul><p>通过使用 Maven Wrapper，你的项目可以真正做到&quot;开箱即用&quot;，任何克隆项目的人都可以立即开始构建，无需担心 Maven 版本或配置问题。特别是通过项目级别的 <code>settings.xml</code> 统一配置，彻底解决了因配置差异导致的构建不一致问题。</p><hr><p><strong>参考资源</strong>：</p><ul><li><a href="https://maven.apache.org/wrapper/" target="_blank" rel="noreferrer">Maven Wrapper 官方文档</a></li><li><a href="https://github.com/takari/maven-wrapper" target="_blank" rel="noreferrer">Maven Wrapper GitHub</a></li><li><a href="https://maven.apache.org/" target="_blank" rel="noreferrer">Maven 官方文档</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-d30c2b42 data-v-6d6b3e6e><!--[--><!--]--><div class="edit-info" data-v-6d6b3e6e><!----><div class="last-updated" data-v-6d6b3e6e><p class="VPLastUpdated" data-v-6d6b3e6e data-v-17f12ee2>上次更新时间: <time datetime="2026-01-01T07:14:07.000Z" data-v-17f12ee2></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-8e410b79 data-v-e121ba62><div class="container" data-v-e121ba62><p class="message" data-v-e121ba62>我与我周旋久，宁做我</p><p class="copyright" data-v-e121ba62>Copyright © 2025</p></div></footer><!--[--><div class="back-button-floating"><div class="floating-ball"><span class="back-icon">←</span><span class="back-text">返回</span></div></div><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"drafts_index.md\":\"Ck7PHTEk\",\"english_index.md\":\"BgnHkeOC\",\"english_常用短语.md\":\"CUFSO8t_\",\"english_语法.md\":\"C7mPbqeq\",\"index.md\":\"SQ4xG-we\",\"investment_index.md\":\"DMgqkC_G\",\"investment_经验教训.md\":\"CJkGG2hc\",\"investment_预案_操作预案.md\":\"Bz_O_G8W\",\"reading-notes_index.md\":\"DqGKQVnO\",\"reading-notes_《大话设计模式》_01-uml.md\":\"YM0DaF-L\",\"reading-notes_《大话设计模式》_02-简单工厂模式.md\":\"CqxM45id\",\"reading-notes_《大话设计模式》_03-策略模式.md\":\"WdfH7nnC\",\"reading-notes_《大话设计模式》_index.md\":\"1uwTb12m\",\"tech-learning_build-blog_index.md\":\"Bi1khc3y\",\"tech-learning_build-blog_使用vuepress搭建博客.md\":\"C3t0pO4o\",\"tech-learning_build-blog_使用vuepress默认主题.md\":\"eA7cIEo2\",\"tech-learning_build-blog_将博客部署到github pages.md\":\"CMUog2WQ\",\"tech-learning_index.md\":\"NqJRs96t\",\"tech-learning_java_index.md\":\"CnOdj_Y3\",\"tech-learning_java_jdk21-virtual-threads-intro.md\":\"CcfjoIWo\",\"tech-learning_java_maven-wrapper.md\":\"Du8RhHd9\",\"tech-learning_practice_index.md\":\"0Ysv7X8O\",\"tech-learning_practice_redis批量删除固定前缀key.md\":\"DlLRQZRF\",\"tech-learning_practice_具体问题列表.md\":\"BcdxE0mS\",\"tech-learning_practice_接口耗时问题排查.md\":\"BGPVcYWR\",\"tech-learning_practice_积分消费日志表数据迁移.md\":\"ZV_VSquq\",\"tech-learning_practice_网络连接相关问题排查.md\":\"lVJaX0Q0\",\"tech-learning_web3_北大肖臻《区块链技术与应用》_readme.md\":\"BRg90L9F\",\"tech-learning_web3_北大肖臻《区块链技术与应用》_笔记01-课程简介.md\":\"fUzJl1Ni\",\"tech-learning_web3_北大肖臻《区块链技术与应用》_笔记02-btc-密码学原理.md\":\"BUiPD7H4\",\"tech-learning_web3_北大肖臻《区块链技术与应用》_笔记03-btc-数据结构.md\":\"CPnbZdkJ\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"kenstant的博客\",\"description\":\"kenstant的博客\",\"base\":\"/blogs/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[],\"sidebar\":[],\"aside\":true,\"search\":{\"provider\":\"local\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/kenstant\"}],\"footer\":{\"message\":\"我与我周旋久，宁做我\",\"copyright\":\"Copyright © 2025\"},\"editLink\":false,\"lastUpdatedText\":\"上次更新时间\",\"returnToTopLabel\":\"返回顶部\",\"appearance\":true,\"externalLinkIcon\":true},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>